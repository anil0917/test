<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:munit="http://www.mulesoft.org/schema/mule/munit" xmlns:munit-tools="http://www.mulesoft.org/schema/mule/munit-tools"
	xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xsi:schemaLocation="
		http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
		http://www.mulesoft.org/schema/mule/munit http://www.mulesoft.org/schema/mule/munit/current/mule-munit.xsd
		http://www.mulesoft.org/schema/mule/munit-tools  http://www.mulesoft.org/schema/mule/munit-tools/current/mule-munit-tools.xsd">
	<munit:config name="genericapi-test-suite.xml" />
	<munit:test name="genericapi-test-suite-genericapiFlowTest" doc:id="26e68bff-2c6a-43ba-9af2-31c8c59004aa" description="Test">
		<munit:behavior >
			<set-payload value='#[{&#10;  "OrderId": "00000112",&#10;  "TransactionID": "DOC-000000001",&#10;  "TransactionType": "Invoice",&#10;  "InvoiceType": "Shipment",&#10;  "OrderDate": "2024-08-12 05:00:00",&#10;  "TransactionDate": "2024-08-15 05:00:00",&#10;  "OrderChannel": "MNS",&#10;  "CurrencyCode": "CAD",&#10;  "CountryCode": "CA",&#10;  "TotalCharges": 395.99,&#10;  "TotalAdjustmentAmount": -15,&#10;  "TotalAmount": 380.99,&#10;  "TotalTax": 38.1,&#10;  "TotalWithTax": 419.09,&#10;  "FreightAmount": 8.99,&#10;  "FulfillmentOrderNumber":"", "SoldTo": {&#10;    "AccountId": "123",&#10;    "Address": {&#10;      "Address1": "501 Main St S",&#10;      "Address2": "Suite 2200",&#10;      "City": "Brampton",&#10;      "StateOrProvince": "ON",&#10;      "Country": "CA",&#10;      "PostalCode": "L6Y 1N6"&#10;    }&#10;  },&#10;  "ShipTo": {&#10;    "Address": {&#10;      "Address1": "501 Main St S",&#10;      "Address2": "Apt 206",&#10;      "City": "Brampton",&#10;      "StateOrProvince": "ON",&#10;      "Country": "CA",&#10;      "PostalCode": "L6Y 1N6"&#10;    }&#10;  },&#10;  "Shipments": [&#10;    {&#10;      "Shipment": {&#10;        "ShipmentId": "SP-0076",        "TrackingNumber": "1Z123",&#10;        "Carrier": "UPS",&#10;        "ServiceLevel": "Ground Shipping",&#10;        "ShipDate": "2024-08-20T05:00:00",&#10;        "EstimatedDeliveryDate": "2024-08-23T05:00:00",&#10;        "Lines": [&#10;          {&#10;            "Line": {&#10;              "LineId": "1",&#10;              "ShipmentLineId": "0001",&#10;              "Type": "OrderProduct",&#10;              "ProductCode": "123",&#10;              "ProductName": "Switch",&#10;              "ProductClass": "Console",&#10;              "UnitPrice": 395.99,&#10;              "LinePrice": 380.99,&#10;              "LineTax": 38.7,&#10;              "LineDiscount": 15,&#10;              "Qty": "2",&#10;              "LineTotal": "458.39",&#10;              "PriceAdjustments": [&#10;                {&#10;                  "PriceAdjustment": {},&#10;                  "Type": "Discount",&#10;                  "Reason": "Other",&#10;                  "Amount": 10&#10;                },&#10;                {&#10;                  "PriceAdjustment": {},&#10;                  "Type": "GoldPoints",&#10;                  "Amount": 5&#10;                }&#10;              ],&#10;              "TaxDetails": [&#10;                {&#10;                  "TaxType": "GST",&#10;                  "TaxAmount": "30.4"&#10;                },&#10;                {&#10;                  "TaxType": "PST",&#10;                  "TaxAmount": "8.30"&#10;                }&#10;              ]&#10;            }&#10;          }&#10;        ]&#10;      }&#10;    },&#10;    {&#10;      "Shipment": {&#10;        "ShipmentId": "SP-0076",&#10;        "TrackingNumber": "1Z1244",&#10;        "Carrier": "UPS",&#10;        "ServiceLevel": "Ground Shipping",&#10;        "ShipDate": "2024-08-20T05:00:00",&#10;        "EstimatedDeliveryDate": "2024-08-24T05:00:00",&#10;        "Lines": [&#10;          {&#10;            "Line": {&#10;              "LineId": "2",&#10;              "ShipmentLineId": "0001",&#10;              "Type": "OrderProduct",&#10;              "ProductCode": "123",&#10;              "ProductName": "Switch",&#10;              "ProductClass": "Console",&#10;              "UnitPrice": 395.99,&#10;              "LinePrice": 380.99,&#10;              "LineTax": 38.7,&#10;              "LineDiscount": 15,&#10;              "Qty": "2",&#10;              "LineTotal": "458.39",&#10;              "PriceAdjustments": [&#10;                {&#10;                  "PriceAdjustment": {&#10;                    "Type": "Discount",&#10;                    "Reason": "Other",&#10;                    "Amount": 10&#10;                  }&#10;                },&#10;                {&#10;                  "PriceAdjustment": {&#10;                    "Type": "GoldPoints",&#10;                    "Amount": 5&#10;                  }&#10;                }&#10;              ],&#10;              "TaxDetails": [&#10;                {&#10;                  "TaxType": "GST",&#10;                  "TaxAmount": "30.4"&#10;                },&#10;                {&#10;                  "TaxType": "PST",&#10;                  "TaxAmount": "8.30"&#10;                }&#10;              ]&#10;            }&#10;          },&#10;          {&#10;            "Line": {&#10;              "LineId": "1000",&#10;              "ShipmentLineId": "0002",&#10;              "Type": "Shipping",&#10;              "UnitPrice": 5.99,&#10;              "LinePrice": 5.99,&#10;              "LineTax": 0.6,&#10;              "Qty": "1",&#10;              "TaxDetails": [&#10;                {&#10;                  "TaxType": "GST",&#10;                  "TaxAmount": "0.40"&#10;                },&#10;                {&#10;                  "TaxType": "PST",&#10;                  "TaxAmount": "0.20"&#10;                }&#10;              ]&#10;            }&#10;          }&#10;        ]&#10;      }&#10;    }&#10;  ]&#10;}]' doc:name="Set Payload" doc:id="45c0caaf-d11d-475b-baca-17dd547d3066" />
			<munit-tools:mock-when doc:name="Mock when" doc:id="a56bc7d8-eec0-438b-b8d5-0319f6e69592" processor="db:bulk-insert">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Bulk insert" attributeName="doc:name" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#["Mocking DB Insert"]' />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to genericapiFlow" doc:id="ba7acd41-81f9-42ac-a3a0-35cc65643cd0" name="genericapiFlow"/>
		</munit:execution>
	</munit:test>


</mule>
